import{r as T,au as k,j,aw as A,aB as D,as as R,aa as I}from"./DOh1AU71.js";import{i as x}from"./DY7prswQ.js";function N(e,o){if(typeof e!="string")throw new TypeError("argument str must be a string");const t={},i=o||{},c=i.decode||P;let a=0;for(;a<e.length;){const n=e.indexOf("=",a);if(n===-1)break;let r=e.indexOf(";",a);if(r===-1)r=e.length;else if(r<n){a=e.lastIndexOf(";",n-1)+1;continue}const u=e.slice(a,n).trim();if(i!=null&&i.filter&&!(i!=null&&i.filter(u))){a=r+1;continue}if(t[u]===void 0){let s=e.slice(n+1,r).trim();s.codePointAt(0)===34&&(s=s.slice(1,-1)),t[u]=L(s,c)}a=r+1}return t}function P(e){return e.includes("%")?decodeURIComponent(e):e}function L(e,o){try{return o(e)}catch{return e}}const y=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function v(e,o,t){const i=t||{},c=i.encode||encodeURIComponent;if(typeof c!="function")throw new TypeError("option encode is invalid");if(!y.test(e))throw new TypeError("argument name is invalid");const a=c(o);if(a&&!y.test(a))throw new TypeError("argument val is invalid");let n=e+"="+a;if(i.maxAge!==void 0&&i.maxAge!==null){const r=i.maxAge-0;if(Number.isNaN(r)||!Number.isFinite(r))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(r)}if(i.domain){if(!y.test(i.domain))throw new TypeError("option domain is invalid");n+="; Domain="+i.domain}if(i.path){if(!y.test(i.path))throw new TypeError("option path is invalid");n+="; Path="+i.path}if(i.expires){if(!M(i.expires)||Number.isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");n+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(n+="; HttpOnly"),i.secure&&(n+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":{n+="; Priority=Low";break}case"medium":{n+="; Priority=Medium";break}case"high":{n+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:{n+="; SameSite=Strict";break}case"lax":{n+="; SameSite=Lax";break}case"strict":{n+="; SameSite=Strict";break}case"none":{n+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(n+="; Partitioned"),n}function M(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function f(e){if(typeof e!="object")return e;var o,t,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){t=new e.constructor;for(o in e)e.hasOwnProperty(o)&&t[o]!==e[o]&&(t[o]=f(e[o]))}else{t={};for(o in e)o==="__proto__"?Object.defineProperty(t,o,{value:f(e[o]),configurable:!0,enumerable:!0,writable:!0}):t[o]=f(e[o])}return t}if(i==="[object Array]"){for(o=e.length,t=Array(o);o--;)t[o]=f(e[o]);return t}return i==="[object Set]"?(t=new Set,e.forEach(function(c){t.add(f(c))}),t):i==="[object Map]"?(t=new Map,e.forEach(function(c,a){t.set(f(a),f(c))}),t):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(t=new RegExp(e.source,e.flags),t.lastIndex=e.lastIndex,t):i==="[object DataView]"?new e.constructor(f(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}const U={path:"/",watch:!0,decode:e=>R(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},g=window.cookieStore;function q(e,o){var u;const t={...U,...o};t.filter??(t.filter=s=>s===e);const i=E(t)||{};let c;t.maxAge!==void 0?c=t.maxAge*1e3:t.expires&&(c=t.expires.getTime()-Date.now());const a=c!==void 0&&c<=0,n=f(a?void 0:i[e]??((u=t.default)==null?void 0:u.call(t))),r=c&&!a?F(n,c,t.watch&&t.watch!=="shallow"):T(n);{let s=null;try{!g&&typeof BroadcastChannel<"u"&&(s=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const l=()=>{t.readonly||x(r.value,i[e])||(B(e,r.value,t),i[e]=f(r.value),s==null||s.postMessage({value:t.encode(r.value)}))},p=d=>{var w;const m=d.refresh?(w=E(t))==null?void 0:w[e]:t.decode(d.value);h=!0,r.value=m,i[e]=f(m),I(()=>{h=!1})};let h=!1;const S=!!A();if(S&&k(()=>{h=!0,l(),s==null||s.close()}),g){const d=m=>{const w=m.changed.find(b=>b.name===e),O=m.deleted.find(b=>b.name===e);w&&p({value:w.value}),O&&p({value:null})};g.addEventListener("change",d),S&&k(()=>g.removeEventListener("change",d))}else s&&(s.onmessage=({data:d})=>p(d));t.watch?j(r,()=>{h||l()},{deep:t.watch!=="shallow"}):l()}return r}function E(e={}){return N(document.cookie,e)}function _(e,o,t={}){return o==null?v(e,o,{...t,maxAge:-1}):v(e,o,t)}function B(e,o,t={}){document.cookie=_(e,o,t)}const C=2147483647;function F(e,o,t){let i,c,a=0;const n=t?T(e):{value:e};return A()&&k(()=>{c==null||c(),clearTimeout(i)}),D((r,u)=>{t&&(c=j(n,u));function s(){a=0,clearTimeout(i);const l=o-a,p=l<C?l:C;i=setTimeout(()=>{if(a+=p,a<o)return s();n.value=void 0,u()},p)}return{get(){return r(),n.value},set(l){s(),n.value=l,u()}}})}export{q as u};
